<div *ngIf="isOpen" class="fixed inset-0 z-[100] flex items-center justify-center p-4 animate-fade-in">

    <div class="absolute inset-0 bg-black/80 backdrop-blur-sm" (click)="closeModal()"></div>


    <div
        class="relative bg-dark/90 border border-white/10 rounded-2xl w-full max-w-lg p-8 shadow-[0_0_50px_rgba(0,0,0,0.5)] transform scale-100 transition-all duration-300">


        <button (click)="closeModal()" class="absolute top-4 right-4 text-gray-400 hover:text-white transition-colors">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
            </svg>
        </button>

        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-white mb-2">Enquire <span class="text-primary">Now</span></h2>
            <p class="text-gray-400 text-sm">Fill out the form below and we'll get back to you shortly.</p>
        </div>

        <form [formGroup]="enquiryForm" (ngSubmit)="onSubmit()" class="space-y-5">


            <div>
                <input type="text" formControlName="name" placeholder="Full Name"
                    class="w-full bg-white/5 border text-white rounded-lg px-4 py-3 focus:outline-none focus:ring-1 transition-colors duration-300"
                    [ngClass]="{'border-red-500 focus:border-red-500 focus:ring-red-500/20': f['name'].invalid && (f['name'].dirty || f['name'].touched), 'border-white/10 focus:border-primary focus:ring-primary/20': !f['name'].invalid || (!f['name'].dirty && !f['name'].touched)}">

                <div *ngIf="f['name'].invalid && (f['name'].dirty || f['name'].touched)"
                    class="text-red-500 text-xs mt-1 ml-1">
                    <span *ngIf="f['name'].errors?.['required']">Name is required.</span>
                    <span *ngIf="f['name'].errors?.['minlength']">Name must be at least 3 characters.</span>
                </div>
            </div>


            <div>
                <input type="tel" formControlName="phone" placeholder="Phone Number (+91)"
                    class="w-full bg-white/5 border text-white rounded-lg px-4 py-3 focus:outline-none focus:ring-1 transition-colors duration-300"
                    [ngClass]="{'border-red-500 focus:border-red-500 focus:ring-red-500/20': f['phone'].invalid && (f['phone'].dirty || f['phone'].touched), 'border-white/10 focus:border-primary focus:ring-primary/20': !f['phone'].invalid || (!f['phone'].dirty && !f['phone'].touched)}">

                <div *ngIf="f['phone'].invalid && (f['phone'].dirty || f['phone'].touched)"
                    class="text-red-500 text-xs mt-1 ml-1">
                    <span *ngIf="f['phone'].errors?.['required']">Phone number is required.</span>
                    <span *ngIf="f['phone'].errors?.['pattern']">Enter a valid 10-digit Indian phone number.</span>
                </div>
            </div>


            <div>
                <input type="email" formControlName="email" placeholder="Email Address"
                    class="w-full bg-white/5 border text-white rounded-lg px-4 py-3 focus:outline-none focus:ring-1 transition-colors duration-300"
                    [ngClass]="{'border-red-500 focus:border-red-500 focus:ring-red-500/20': f['email'].invalid && (f['email'].dirty || f['email'].touched), 'border-white/10 focus:border-primary focus:ring-primary/20': !f['email'].invalid || (!f['email'].dirty && !f['email'].touched)}">

                <div *ngIf="f['email'].invalid && (f['email'].dirty || f['email'].touched)"
                    class="text-red-500 text-xs mt-1 ml-1">
                    <span *ngIf="f['email'].errors?.['required']">Email address is required.</span>
                    <span *ngIf="f['email'].errors?.['email']">Enter a valid email address.</span>
                </div>
            </div>


            <div>
                <textarea formControlName="message" rows="3" placeholder="Your Message"
                    class="w-full bg-white/5 border text-white rounded-lg px-4 py-3 focus:outline-none focus:ring-1 transition-colors duration-300 resize-none"
                    [ngClass]="{'border-red-500 focus:border-red-500 focus:ring-red-500/20': f['message'].invalid && (f['message'].dirty || f['message'].touched), 'border-white/10 focus:border-primary focus:ring-primary/20': !f['message'].invalid || (!f['message'].dirty && !f['message'].touched)}"></textarea>

                <div *ngIf="f['message'].invalid && (f['message'].dirty || f['message'].touched)"
                    class="text-red-500 text-xs mt-1 ml-1">
                    <span *ngIf="f['message'].errors?.['required']">Message is required.</span>
                    <span *ngIf="f['message'].errors?.['minlength']">Message must be at least 10 characters.</span>
                </div>
            </div>


            <button type="submit" [disabled]="enquiryForm.invalid"
                class="w-full bg-primary text-dark font-bold py-3 rounded-lg transition-all duration-300 transform shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
                [ngClass]="{'hover:bg-yellow-600 hover:scale-[1.02] hover:shadow-primary/20': !enquiryForm.invalid}">
                Submit Enquiry
            </button>
        </form>
    </div>
</div>